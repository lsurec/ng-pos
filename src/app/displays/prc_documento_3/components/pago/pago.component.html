<!-- VISTA DE PAGO -->
<div class="contenido">
    <div class="detalle-pago">

        <div class="informacion" *ngIf="!pagoComponentService.forms">

            <p class="titulo">{{ 'pos.factura.agregar_pago' | translate }} </p>

            <div class="tipos-pago" *ngFor="let pago of facturaService.formasPago" (click)="viewForms(pago)">
                <p class="subtitulo"> {{pago.descripcion}} </p>
                <span class="spacer"></span>
                <mat-icon>arrow_right</mat-icon>
            </div>
        </div>

        <!-- Formmulario de datos-->
        <div class="informacion" *ngIf="pagoComponentService.forms">
            <div class="dFlex">
                <button (click)="viewPayments()" mat-icon-button aria-label class="flecha-regresar"
                    matTooltip="{{'pos.botones.regresar' | translate}}">
                    <mat-icon>arrow_back</mat-icon>
                </button>
                <p class="titulo">{{pagoComponentService.pago!.descripcion | titlecase}}</p>
            </div>

            <!--Monto-->
            <p class="subtitulo">{{ 'pos.factura.monto' | translate }}</p>
            <input class="total" type="text" name="search" [(ngModel)]="pagoComponentService.monto" autocomplete="off">

            <!--Autorizacion-->
            <div *ngIf="pagoComponentService.pago!.autorizacion">
                <p class="subtitulo">{{ 'pos.factura.autorizacion' | translate }}</p>
                <input class="total" type="text" name="search"
                    placeholder="{{ 'pos.factura.autorizacion' | translate }}" [(ngModel)]="autorizacion"
                    autocomplete="off">
            </div>

            <!--Referencia-->
            <div *ngIf="pagoComponentService.pago!.referencia">
                <p class="subtitulo">{{ 'pos.factura.referencia' | translate }}</p>

                <input class="total" type="text" name="search" placeholder="{{ 'pos.factura.referencia' | translate }}"
                    [(ngModel)]="referencia" autocomplete="off">
            </div>

            <!--Bancos-->
            <div *ngIf="pagoComponentService. pago!.banco">
                <p class="titulo">{{ 'pos.factura.bancos' | translate }}</p>
                <div class="lista-bancos">
                    <mat-radio-group class="example-radio-group" [(ngModel)]="pagoComponentService.banco"
                        (ngModelChange)="changeBanco()">
                        <mat-radio-button class="bancos" *ngFor="let banco of pagoComponentService. bancos; let i = index" [value]="banco"
                            color="primary">
                            <p class="opciones">{{banco.nombre}}</p>
                        </mat-radio-button>
                    </mat-radio-group>
                </div>

            </div>

            <div *ngIf="pagoComponentService.banco && pagoComponentService.cuentas.length > 0">

                <!--TODO:Translate-->
                <p class="titulo">Cuentas</p>

                <div class="lista-cuentas">
                    <mat-radio-group class="example-radio-group" [(ngModel)]="cuentaSelect">
                        <mat-radio-button class="cuentas" *ngFor="let cuenta of pagoComponentService.cuentas; let i = index" [value]="cuenta"
                            color="primary" (click)="cuentaSelect = cuenta">
                            <p class="opciones">{{cuenta.descripcion}}</p>

                        </mat-radio-button>
                    </mat-radio-group>
                </div>
            </div>


            <div class="agregar-pago" (click)="agregarMonto()">
                <p class="pago">{{ 'pos.factura.agregar_pago' | translate }}</p>
            </div>

        </div>


        <div class="pagar">
            <div class="dFlex">
                <p class="textos">{{ 'pos.factura.total' | translate }}</p>
                <span class="spacer"></span>
                <p class="textos">{{facturaService.total | currency:' ':'symbol':'2.2-2' }}</p>
            </div>
            <div class="dFlex">
                <p class="textos">{{ 'pos.factura.saldo' | translate }}</p>
                <span class="spacer"></span>
                <p class="textos">{{facturaService.saldo | currency:' ':'symbol':'2.2-2' }}</p>
            </div>
            <div class="dFlex">
                <p class="textos">{{ 'pos.factura.cambio' | translate }}</p>
                <span class="spacer"></span>
                <p class="textos">{{facturaService.cambio | currency:' ':'symbol':'2.2-2' }}</p>
            </div>
        </div>
    </div>
    <span class="spacer"></span>
    <!-- PAGOS AGREGADOS -->
    <div class="pagos-gregados">
        <div class="pago-agregado">
            <div class="dFlex" *ngIf="facturaService.montos.length > 0">
                <mat-checkbox class="example-margin" color="primary" [(ngModel)]="selectAllMontos"
                    (ngModelChange)="seleccionar()"></mat-checkbox>
                <p class="titulo">{{ 'pos.factura.pagos_agregados' | translate }} ({{ facturaService.montos .length}})</p>
                <span class="spacer"></span>
                <button mat-icon-button (click)="eliminarPagosSeleccionados()">
                    <mat-icon>delete</mat-icon>
                </button>
            </div>
        </div>

        <div class="pagos" *ngFor="let pago of facturaService.montos">
            <div class="dFlex">
                <mat-checkbox class="example-margin" color="primary" [(ngModel)]="pago.checked"></mat-checkbox>
                <div class="descripcion-pago">
                    <p class="subtitulo">{{pago.payment.descripcion}}</p>
                    <p class="info-pago">{{ 'pos.factura.monto' | translate }} {{pago.amount | currency:' ':'symbol':'2.2-2' }}</p>
                    <p class="info-pago" *ngIf="pago.payment.autorizacion">{{ 'pos.factura.autorizacion' | translate }}:
                        {{pago.authorization}}</p>
                    <p class="info-pago" *ngIf="pago.payment.referencia">{{ 'pos.factura.referencia' | translate }}:
                        {{pago.reference}}</p>
                    <p class="info-pago" *ngIf="pago.payment.banco">{{ 'pos.factura.banco' | translate }}{{pago.bank}}</p>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="total-pagar">
    <span class="spacer"></span>
    <!-- Agregar Pago -->
    <div class="pagar">
        <div class="dFlex">
            <p class="textos">{{ 'pos.factura.subtotal' | translate }}</p>
            <span class="spacer"></span>
            <!-- <p class="textos">{{facturaService.subtotal | currency:' ':'symbol':'2.2-2'}}</p> -->
            <p class="textos">10.00</p>
        </div>
        <div class="dFlex">
            <p class="textos">{{ 'pos.factura.cargos' | translate }}</p>
            <span class="spacer"></span>
            <!-- <p class="textos">{{facturaService.cargo | currency:' ':'symbol':'2.2-2'}} </p> -->
            <p class="textos">10.00</p>
        </div>
        <div class="dFlex">
            <p class="textos">{{ 'pos.factura.descuentos' | translate }}</p>
            <span class="spacer"></span>
            <!-- <p class="textos">{{facturaService.descuento | currency:' ':'symbol':'2.2-2'}}</p> -->
            <p class="textos">10.00</p>
        </div>
        <div class="dFlex total-barra">
            <p class="textos">{{ 'pos.factura.total' | translate }}</p>
            <span class="spacer"></span>
            <!-- <p class="textos">{{facturaService.total | currency:' ':'symbol':'2.2-2'}}</p> -->
            <p class="textos">10.00</p>
        </div>
    </div>
</div>