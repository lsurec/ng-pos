<!-- VISTA DE DOCUMENTO -->
<div class="documento">

    <div class="serie-vendedor">

        <div class="informacion">
            <p class="subtitulo">{{ 'pos.factura.series' | translate }}</p>
            <mat-select name="estado" class="seleccionar" placeholder="{{ 'pos.factura.seleccionarSerie' | translate }}"
                [(ngModel)]="facturaService.serie" (ngModelChange)="changeSerie()">
                <mat-option *ngFor="let serie of facturaService.series" [value]="serie">
                    {{serie.descripcion}}
                </mat-option>
            </mat-select>
        </div>

        <div class="informacion" *ngIf="facturaService.valueParametro(58)">
            <p class="tEvento">{{ facturaService.getTextParam(58) ?? 'pos.factura.evento' | translate }}</p>
            <p class="subtitulo">{{ 'pos.factura.tipoRef' | translate }}</p>
            <mat-select name="estado" class="seleccionar" placeholder="{{ 'pos.factura.tipoRef' | translate }}"
                [(ngModel)]="facturaService.tipoReferencia">
                <mat-option *ngFor="let referencia of facturaService.tiposReferencia" [value]="referencia">
                    {{referencia.descripcion}}
                </mat-option>
            </mat-select>
            <!-- 
            <textarea name="notas" id="descripcion" cols="30" rows="4" class="campos bRef"
                placeholder="{{ 'pos.factura.escribir' | translate }}" [(ngModel)]="tipoReferencia"></textarea> -->
        </div>

        <!-- Fechas -->
        <div class="informacion">
            <ng-container *ngIf="facturaService.valueParametro(381)">
                <p class="textosBold14">{{ facturaService.getTextParam(381) ?? 'pos.factura.fEntrega' | translate }}</p>
                <div class="fechas">
                    <form class="calendarios">
                        <div class="input-group">
                            <input class="form-control" name="dp" [(ngModel)]="facturaService.inputFechaEntrega"
                                ngbDatepicker #fEntrega="ngbDatepicker" (ngModelChange)="setDateEntrega()" />
                            <button class="btn btn-outline-secondary ver-calendario" (click)="fEntrega.toggle()"
                                type="button">
                                <mat-icon class="ico-calendario">calendar_month</mat-icon>
                            </button>
                        </div>
                    </form>
                    <span class="spacer"></span>
                    <div class="horas">
                        <div class="hora-calendario">
                            <input [ngxTimepicker]="horaEntregaPiker" readonly class="hora"
                                [(ngModel)]="facturaService. horaEntrega" (ngModelChange)="setDateEntrega()">
                            <ngx-material-timepicker #horaEntregaPiker
                                [defaultTime]=" getHoraInput(facturaService.fecha)"></ngx-material-timepicker>
                        </div>
                        <button class="btn btn-outline-secondary ver-hora" (click)="abrirTimePicker(horaEntregaPiker)"
                            type="button">
                            <mat-icon class="ico-calendario">access_time</mat-icon>
                        </button>
                    </div>
                </div>
            </ng-container>

            <ng-container *ngIf="facturaService.valueParametro(382)">
                <p class="textosBold14">{{ facturaService.getTextParam(382) ?? 'pos.factura.fRecoger' | translate }}</p>

                <div class="fechas">
                    <form class="calendarios">
                        <div class="input-group">
                            <input class="form-control" name="dp2" [(ngModel)]="facturaService.inputFechaRecoger"  (ngModelChange)="setDateRecoger()"
                                ngbDatepicker #fRecoger="ngbDatepicker" [minDate]="facturaService.inputFechaEntrega!" />
                            <button class="btn btn-outline-secondary ver-calendario" (click)="fRecoger.toggle()"
                                type="button">
                                <mat-icon class="ico-calendario">calendar_month</mat-icon>
                            </button>
                        </div>
                    </form>
                    <span class="spacer"></span>
                    <div class="horas">
                        <div class="hora-calendario">
                            <input [ngxTimepicker]="horaRegogerPiker" readonly class="hora"
                                [(ngModel)]="facturaService. horaRecoger"  (ngModelChange)="setDateRecoger()">
                            <ngx-material-timepicker #horaRegogerPiker
                                [defaultTime]="getHoraInput(facturaService. fecha)"></ngx-material-timepicker>
                        </div>
                        <button class="btn btn-outline-secondary ver-hora" (click)="abrirTimePicker(horaRegogerPiker)"
                            type="button">
                            <mat-icon class="ico-calendario">access_time</mat-icon>
                        </button>
                    </div>
                </div>
            </ng-container>

            <hr>
            <ng-container *ngIf="facturaService.valueParametro(44)">
                <p class="textosBold14">{{ 'pos.documento.fechaIni' | translate }}</p>
                <div class="fechas">
                    <form class="calendarios">
                        <div class="input-group">
                            <input class="form-control" name="dp" [(ngModel)]="facturaService.inputFechaInicial"  (ngModelChange)="setDateIncio()"
                                ngbDatepicker #fInicio="ngbDatepicker" />
                            <button class="btn btn-outline-secondary ver-calendario" (click)="fInicio.toggle()"
                                type="button">
                                <mat-icon class="ico-calendario">calendar_month</mat-icon>
                            </button>
                        </div>
                    </form>
                    <span class="spacer"></span>
                    <div class="horas">
                        <div class="hora-calendario">
                            <input [ngxTimepicker]="horaInicioPiker" readonly class="hora"
                                [(ngModel)]="facturaService. horaIncial"  (ngModelChange)="setDateIncio()">
                            <ngx-material-timepicker #horaInicioPiker
                                [defaultTime]="getHoraInput(facturaService. fecha)"></ngx-material-timepicker>
                        </div>
                        <button class="btn btn-outline-secondary ver-hora" (click)="abrirTimePicker(horaInicioPiker)"
                            type="button">
                            <mat-icon class="ico-calendario">access_time</mat-icon>
                        </button>
                    </div>
                </div>

                <p class="textosBold14">{{ 'pos.documento.fechaFin' | translate }}</p>
                <div class="fechas">
                    <form class="calendarios">
                        <div class="input-group">
                            <input class="form-control" name="dp2" [(ngModel)]="facturaService.inputFechaFinal"  (ngModelChange)="setDateFin()"
                                ngbDatepicker #fFinal="ngbDatepicker" [minDate]="facturaService.inputFechaInicial!" />
                            <button class="btn btn-outline-secondary ver-calendario" (click)="fFinal.toggle()"
                                type="button">
                                <mat-icon class="ico-calendario">calendar_month</mat-icon>
                            </button>
                        </div>
                    </form>
                    <span class="spacer"></span>

                    <div class="horas">
                        <div class="hora-calendario">
                            <input [ngxTimepicker]="horaFinalPiker" readonly class="hora"
                                [(ngModel)]="facturaService. horaFinal"  (ngModelChange)="setDateFin()">
                            <ngx-material-timepicker #horaFinalPiker
                                [defaultTime]="getHoraInput(facturaService. fecha)"></ngx-material-timepicker>
                        </div>
                        <button class="btn btn-outline-secondary ver-hora" (click)="abrirTimePicker(horaFinalPiker)"
                            type="button">
                            <mat-icon class="ico-calendario">access_time</mat-icon>
                        </button>
                    </div>
                </div>
                <hr>
            </ng-container>

        </div>


        <div class="buscar-cliente">
            <div class="dFlex">
                <p class="subtitulo">{{facturaService.getTextParam(57) ?? 'Cuenta' | titlecase}}</p>
                <span class="spacer"></span>
                <button mat-icon-button (click)="agregarCliente()" [matTooltip]="'pos.factura.nueva'  | translate">
                    <mat-icon>person_add</mat-icon>
                </button>

            </div>
            <form #searchForm="ngForm" (ngSubmit)="buscarCliente()">
                <p class="subtitulo">{{ 'pos.factura.buscar' | translate }}</p>
                <div class="input-container">
                    <input class="barra-de-busqueda" type="search" name="search"
                        [(ngModel)]="facturaService.searchClient" autocomplete="off"
                        placeholder="{{'pos.inputs.buscar' | translate}}">
                    <button mat-icon-button class="iconoLupa" type="submit">
                        <mat-icon>search</mat-icon>
                    </button>
                </div>
            </form>
        </div>

        <div class="informacion">
            <div class="d-flex">
                <p class="subtitulo">{{ 'pos.factura.cf' | translate }} </p>
                <span class="spacer"></span>
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault"
                        (change)="setCF()">
                </div>
            </div>
        </div>


        <div class="informacion" *ngIf="facturaService.cuenta">
            <div class="dFlex">
                <p class="titulo">{{facturaService.getTextParam(57) ?? 'Cuenta' | titlecase}}</p>
                <span class="spacer"></span>
                <button *ngIf="!switchState" mat-icon-button (click)="actualizar()"
                    [matTooltip]="'pos.factura.actualizar' | translate">
                    <mat-icon>edit</mat-icon>
                </button>
            </div>
            <div class="dFlex">
                <p class="detalles">{{ 'pos.factura.nit' | translate }}</p>
                <span class="spacer"></span>
                <p>{{facturaService.cuenta.factura_NIT}}</p>
            </div>
            <div class="dFlex">
                <p class="detalles">{{ 'pos.factura.nombre' | translate }}</p>
                <span class="spacer"></span>
                <p>{{facturaService.cuenta.factura_Nombre}}</p>
            </div>
            <span class="spacer"></span>
            <div class="dFlex">
                <p class="detalles">{{ 'pos.factura.direccion' | translate }}</p>
                <span class="spacer"></span>
                <p>Ciudad</p>
            </div>
        </div>

    </div>
    <span class="spacer"></span>

    <div class="cliente" *ngIf="facturaService.vendedores.length > 0">

        <div class="informacion">
            <p class="subtitulo">{{ 'pos.factura.vendedor' | translate }}</p>
            <mat-select name="estado" class="seleccionar"
                placeholder="{{ 'pos.factura.seleccionarVendedor' | translate }}" [(ngModel)]="facturaService.vendedor"
                (ngModelChange)="changeVendedor()">
                <mat-option *ngFor="let vendedor of facturaService.vendedores" [value]="vendedor">
                    {{vendedor.nom_Cuenta_Correntista}}
                </mat-option>
            </mat-select>
        </div>

        <div class="detalles-fondo" *ngIf="facturaService.valueParametro(385)">
            <p class="textosBold14">{{facturaService.getTextParam(385) ?? 'pos.factura.contacto' | translate }}</p>
            <span class="spacer"></span>
            <textarea name="notas" id="descripcion" cols="30" rows="4" class="campos"
                placeholder="{{ 'pos.factura.escribir' | translate }}"
                [(ngModel)]="facturaService.refContacto"></textarea>
        </div>

        <div class="detalles-fondo" *ngIf="facturaService.valueParametro(383)">
            <p class="textosBold14">{{ facturaService.getTextParam(383) ?? 'pos.factura.descripcion' | translate }}</p>
            <span class="spacer"></span>
            <textarea name="notas" id="descripcion" cols="30" rows="4" class="campos"
                placeholder="{{ 'pos.factura.escribir' | translate }}"
                [(ngModel)]="facturaService.refDescripcion"></textarea>
        </div>

        <div class="detalles-fondo" *ngIf="facturaService.valueParametro(386)">
            <p class="textosBold14">{{ facturaService.getTextParam(386) ?? 'pos.factura.entrega' | translate }}</p>
            <span class="spacer"></span>
            <textarea name="notas" id="descripcion" cols="30" rows="4" class="campos"
                placeholder="{{ 'pos.factura.escribir' | translate }}"
                [(ngModel)]="facturaService.refDireccionEntrega"></textarea>
        </div>

        <div class="detalles-fondo" *ngIf=" facturaService.valueParametro(384)">
            <p class="textosBold14">{{ facturaService.getTextParam(384) ?? 'pos.factura.observacion' | translate }}</p>
            <textarea name="notas" id="descripcion" cols="30" rows="4" class="campos"
                placeholder="{{ 'pos.factura.escribir' | translate }}"
                [(ngModel)]="facturaService.refObservacion"></textarea>
        </div>

        <!-- <div class="detalles-fondo-v" *ngIf="facturaService.valueParametro(58)">
            <div class="dFlex">
                <p class="textosBold14">Id:</p>
                <span class="spacer"></span>
                <p class="textos14">14217</p>
            </div>

            <div class="dFlex">
                <p class="textosBold14"> {{ 'pos.documento.usuario' |translate }}</p>
                <span class="spacer"></span>
                <p class="textos14">Ventas502</p>
            </div>

            <div class="dFlex">
                <p class="textosBold14"> {{ 'pos.factura.referencia' |translate }}: </p>
                <span class="spacer"></span>
                <p class="textos14">14217</p>
            </div>

            <div class="dFlex">
                <p class="textosBold14">{{ 'pos.factura.estado' |translate }}: </p>
                <span class="spacer"></span>
                <p class="textos14">Activo</p>
            </div>

            <div class="dFlex">
                <p class="textosBold14">{{ 'pos.documento.fechaHora' |translate }}</p>
                <span class="spacer"></span>
                <p class="textos14"> {{fecha | date: 'dd/MM/yyyy'}} - {{horaActual}}</p>
            </div>

        </div> -->

    </div>
</div>