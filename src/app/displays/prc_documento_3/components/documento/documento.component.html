<!-- VISTA DE DOCUMENTO -->
<div class="documento">

    <div class="serie-vendedor">

        <div class="informacion">
            <p class="subtitulo">{{ 'pos.factura.series' | translate }}</p>
            <mat-select name="estado" class="seleccionar" placeholder="{{ 'pos.factura.seleccionarSerie' | translate }}"
                [(ngModel)]="facturaService.serie" (ngModelChange)="changeSerie()">
                <mat-option *ngFor="let serie of facturaService.series" [value]="serie">
                    {{serie.descripcion}}
                </mat-option>
            </mat-select>
        </div>

        <div class="informacion" *ngIf="verReferencia">
            <p class="subtitulo">Tipo de referencia:</p>
            <mat-select name="estado" class="seleccionar" placeholder="Tipo de referencia:"
                [(ngModel)]="facturaService.serie" (ngModelChange)="changeSerie()">
                <mat-option *ngFor="let serie of facturaService.series" [value]="serie">
                    {{serie.descripcion}}
                </mat-option>
            </mat-select>
        </div>

        <!-- Fechas -->
        <div class="informacion" *ngIf="verFechas">
            <p class="textosBold14">Fecha entrega:</p>
            <div class="fechas">
                <form class="calendarios">
                    <div class="input-group">
                        <input class="form-control bf" name="dp" [(ngModel)]="fechaEntrega" ngbDatepicker
                            #fEntrega="ngbDatepicker" />
                        <button class="btn btn-outline-secondary ver-calendario" (click)="fEntrega.toggle()"
                            type="button">
                            <mat-icon class="ico-calendario">calendar_month</mat-icon>
                        </button>
                    </div>
                </form>
                <span class="spacer"></span>
                <div class="horas">
                    <div class="hora-calendario">
                        <input [ngxTimepicker]="horaEntregaPiker" readonly class="hora" [(ngModel)]="horaEntrega">
                        <ngx-material-timepicker #horaEntregaPiker
                            [defaultTime]="getHoraInput(fecha)"></ngx-material-timepicker>
                    </div>
                    <button class="btn btn-outline-secondary ver-hora" (click)="abrirTimePicker(horaEntregaPiker)"
                        type="button">
                        <mat-icon class="ico-calendario">access_time</mat-icon>
                    </button>
                </div>
            </div>

            <p class="textosBold14">Fecha recoger:</p>

            <div class="fechas">
                <form class="calendarios">
                    <div class="input-group">
                        <input class="form-control bf" name="dp2" [(ngModel)]=" fechaRecoger" ngbDatepicker
                            #fRecoger="ngbDatepicker" [minDate]="fechaEntrega!" />
                        <button class="btn btn-outline-secondary ver-calendario" (click)="fRecoger.toggle()"
                            type="button">
                            <mat-icon class="ico-calendario">calendar_month</mat-icon>
                        </button>
                    </div>
                </form>
                <span class="spacer"></span>
                <div class="horas">
                    <div class="hora-calendario">
                        <input [ngxTimepicker]="horaRegogerPiker" readonly class="hora" [(ngModel)]="horaRecoger">
                        <ngx-material-timepicker #horaRegogerPiker
                            [defaultTime]="getHoraInput(fecha)"></ngx-material-timepicker>
                    </div>
                    <button class="btn btn-outline-secondary ver-hora" (click)="abrirTimePicker(horaRegogerPiker)"
                        type="button">
                        <mat-icon class="ico-calendario">access_time</mat-icon>
                    </button>
                </div>
            </div>
            <hr>
            <p class="textosBold14">{{ 'pos.documento.fechaIni' | translate }}</p>
            <div class="fechas">
                <form class="calendarios">
                    <div class="input-group">
                        <input class="form-control bf" name="dp" [(ngModel)]="fechaInicial" ngbDatepicker
                            #fInicio="ngbDatepicker" />
                        <button class="btn btn-outline-secondary ver-calendario" (click)="fInicio.toggle()"
                            type="button">
                            <mat-icon class="ico-calendario">calendar_month</mat-icon>
                        </button>
                    </div>
                </form>
                <span class="spacer"></span>
                <div class="horas">
                    <div class="hora-calendario">
                        <input [ngxTimepicker]="horaInicioPiker" readonly class="hora" [(ngModel)]="horaActual">
                        <ngx-material-timepicker #horaInicioPiker
                            [defaultTime]="getHoraInput(fecha)"></ngx-material-timepicker>
                    </div>
                    <button class="btn btn-outline-secondary ver-hora" (click)="abrirTimePicker(horaInicioPiker)"
                        type="button">
                        <mat-icon class="ico-calendario">access_time</mat-icon>
                    </button>
                </div>
            </div>

            <p class="textosBold14">{{ 'pos.documento.fechaFin' | translate }}</p>
            <div class="fechas">
                <form class="calendarios">
                    <div class="input-group">
                        <input class="form-control bf" name="dp2" [(ngModel)]=" fechaFinal" ngbDatepicker
                            #fFinal="ngbDatepicker" [minDate]="fechaInicial!" />
                        <button class="btn btn-outline-secondary ver-calendario" (click)="fFinal.toggle()"
                            type="button">
                            <mat-icon class="ico-calendario">calendar_month</mat-icon>
                        </button>
                    </div>
                </form>
                <span class="spacer"></span>

                <div class="horas">
                    <div class="hora-calendario">
                        <input [ngxTimepicker]="horaFinalPiker" readonly class="hora" [(ngModel)]="horaFinal">
                        <ngx-material-timepicker #horaFinalPiker
                            [defaultTime]="getHoraInput(fecha)"></ngx-material-timepicker>
                    </div>
                    <button class="btn btn-outline-secondary ver-hora" (click)="abrirTimePicker(horaFinalPiker)"
                        type="button">
                        <mat-icon class="ico-calendario">access_time</mat-icon>
                    </button>
                </div>
            </div>
            <hr>

        </div>


        <div class="buscar-cliente">
            <div class="dFlex">
                <p class="subtitulo">{{facturaService.getTextCuenta() | titlecase}}</p>
                <span class="spacer"></span>
                <button mat-icon-button (click)="agregarCliente()" [matTooltip]="'pos.factura.nueva'  | translate">
                    <mat-icon>person_add</mat-icon>
                </button>
                <button mat-icon-button (click)="verNuevo()">
                    <mat-icon>visibility</mat-icon>
                </button>
            </div>
            <form #searchForm="ngForm" (ngSubmit)="buscarCliente()">
                <p class="subtitulo">{{ 'pos.factura.buscar' | translate }}</p>
                <div class="input-container">
                    <input class="barra-de-busqueda" type="search" name="search"
                        [(ngModel)]="facturaService.searchClient" autocomplete="off"
                        placeholder="{{'pos.inputs.buscar' | translate}}">
                    <button mat-icon-button class="iconoLupa" type="submit">
                        <mat-icon>search</mat-icon>
                    </button>
                </div>
            </form>
        </div>

        <div class="informacion">
            <div class="d-flex">
                <p class="subtitulo">{{ 'pos.factura.cf' | translate }} </p>
                <span class="spacer"></span>
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault"
                        (change)="setCF()">
                </div>
            </div>
        </div>



        <div class="informacion" *ngIf="facturaService.cuenta">
            <div class="dFlex">
                <p class="titulo">{{facturaService.getTextCuenta() | titlecase}}</p>
                <span class="spacer"></span>
                <button *ngIf="!switchState" mat-icon-button (click)="actualizar()"
                    [matTooltip]="'pos.factura.actualizar' | translate">
                    <mat-icon>edit</mat-icon>
                </button>
            </div>
            <div class="dFlex">
                <p class="detalles">{{ 'pos.factura.nit' | translate }}</p>
                <span class="spacer"></span>
                <p>{{facturaService.cuenta.factura_NIT}}</p>
            </div>
            <div class="dFlex">
                <p class="detalles">{{ 'pos.factura.nombre' | translate }}</p>
                <span class="spacer"></span>
                <p>{{facturaService.cuenta.factura_Nombre}}</p>
            </div>
            <span class="spacer"></span>
            <div class="dFlex">
                <p class="detalles">{{ 'pos.factura.direccion' | translate }}</p>
                <span class="spacer"></span>
                <p>Ciudad</p>
            </div>
        </div>

    </div>
    <span class="spacer"></span>

    <div class="cliente" *ngIf="facturaService.vendedores.length > 0">

        <div class="informacion">
            <p class="subtitulo">{{ 'pos.factura.vendedor' | translate }}</p>
            <mat-select name="estado" class="seleccionar"
                placeholder="{{ 'pos.factura.seleccionarVendedor' | translate }}" [(ngModel)]="facturaService.vendedor"
                (ngModelChange)="changeVendedor()">
                <mat-option *ngFor="let vendedor of facturaService.vendedores" [value]="vendedor">
                    {{vendedor.nom_Cuenta_Correntista}}
                </mat-option>
            </mat-select>
        </div>

        <div class="detalles-fondo" *ngIf="verDetalles">
            <p class="textosBold14">Contacto:</p>
            <span class="spacer"></span>
            <textarea name="notas" id="descripcion" cols="30" rows="2" class="campos" placeholder="Añada un contacto."
                [(ngModel)]="nombre"></textarea>
        </div>

        <div class="detalles-fondo" *ngIf="verDetalles">
            <p class="textosBold14">Descripción:</p>
            <span class="spacer"></span>
            <textarea name="notas" id="descripcion" cols="30" rows="2" class="campos"
                placeholder="Añada una descripción." [(ngModel)]="descripcion"></textarea>
        </div>

        <div class="detalles-fondo" *ngIf="verDetalles">
            <p class="textosBold14">Dirección de entrega:</p>
            <span class="spacer"></span>
            <textarea name="notas" id="descripcion" cols="30" rows="2" class="campos"
                placeholder="Añada dirección de entrega." [(ngModel)]="direccion"></textarea>
        </div>

        <div class="detalles-fondo" *ngIf="verDetalles">
            <p class="textosBold14">Observación:</p>
            <textarea name="notas" id="descripcion" cols="30" rows="2" class="campos"
                placeholder="Añada una Observación." [(ngModel)]="observacion"></textarea>
        </div>

        <div class="subtitulo" *ngIf="verDetalles">Detalles</div>

        <div class="detalles-fondo-v" *ngIf="verDetalles">
            <div class="dFlex">
                <p class="textosBold14">Id:</p>
                <span class="spacer"></span>
                <p class="textos14">14217</p>
            </div>

            <div class="dFlex">
                <p class="textosBold14"> Usuario:</p>
                <span class="spacer"></span>
                <p class="textos14">Ventas502</p>
            </div>

            <div class="dFlex">
                <p class="textosBold14"> Referencia:</p>
                <span class="spacer"></span>
                <p class="textos14">14217</p>
            </div>

            <div class="dFlex">
                <p class="textosBold14">Estado</p>
                <span class="spacer"></span>
                <p class="textos14">Activo</p>
            </div>

            <div class="dFlex">
                <p class="textosBold14">Fecha hora:</p>
                <span class="spacer"></span>
                <p class="textos14"> {{fecha | date: 'dd/MM/yyyy'}} - {{horaActual}}</p>
            </div>

        </div>

    </div>
</div>