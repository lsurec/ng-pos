<app-error *ngIf="verError" [regresar]="regresar"></app-error>
<div *ngIf="!verError">
    <app-progress *ngIf="isLoading" class="progress"></app-progress>
    <div *ngIf="!isLoading">
        <div *ngIf="verBusqueda">
            <mat-toolbar class="toolbarPhone">
                <mat-toolbar-row class="toolbar-row">
                    <button mat-icon-button (click)="backPage() " matTooltip="{{ 'pos.botones.regresar' | translate }}">
                        <mat-icon>arrow_back</mat-icon>
                    </button>
                    <button mat-icon-button (click)="loadData()">
                        <mat-icon>refresh</mat-icon>
                    </button>
                    <p class="titulo">Buscar documentos</p>


                    <span class="spacer"></span>

                </mat-toolbar-row>
            </mat-toolbar>
            <mat-toolbar class="toolbarlargeTitle">
                <button mat-icon-button (click)="backPage() " matTooltip="{{ 'pos.botones.regresar' | translate }}">
                    <mat-icon>arrow_back</mat-icon>
                </button>
                <button mat-icon-button (click)="loadData()">
                    <mat-icon>refresh</mat-icon>
                </button>
                <p class="titulo">Buscar documentos</p>


                <span class="spacer"></span>

            </mat-toolbar>

            <div class="container_main" #contentContainer>

                <div class="filtros">
                    <div class="fechas">
                        <form class="calendarios">
                            <p class="textosBold14">{{ 'pos.documento.fechaIni' | translate }}</p>
                            <div class="input-group">
                                <input class="form-control" name="dp" [(ngModel)]=" fechaInicial" ngbDatepicker
                                    #d="ngbDatepicker" (ngModelChange)="loadDocs()" />
                                <button class="btn btn-outline-secondary ver-calendario" (click)="d.toggle()"
                                    type="button">
                                    <mat-icon class="ico-calendario">calendar_month</mat-icon>
                                </button>
                            </div>
                        </form>
                        <span class="spacer"></span>

                        <form class="calendarios">
                            <p class="textosBold14">{{ 'pos.documento.fechaFin' | translate }}</p>


                            <div class="input-group">
                                <input class="form-control" name="dp2" [(ngModel)]=" fechaFinal" ngbDatepicker
                                    #d2="ngbDatepicker" [minDate]="fechaInicial!" (ngModelChange)="loadDocs()" />
                                <button class="btn btn-outline-secondary ver-calendario" (click)="d2.toggle()"
                                    type="button">
                                    <mat-icon class="ico-calendario">calendar_month</mat-icon>
                                </button>
                            </div>
                        </form>
                    </div>
                    <span class="spacer"></span>
                </div>


                <div *ngIf="documentos.length > 0">
                    <!--Boton ir arriba-->
                    <button *ngIf="botonIrArriba" mat-mini-fab class="button_up_content" (click)="scrollUp()">
                        <mat-icon>arrow_upward</mat-icon>
                    </button>
                    <!--Boton ir abajo-->
                    <button *ngIf="botonIrAbajo && ! botonIrArriba" mat-mini-fab class="button_down_content"
                        (click)="scrollDown()">
                        <mat-icon>south</mat-icon>
                    </button>
                </div>

                <div class="informacion">
                    <p class="textosBold14">{{ 'pos.factura.buscarPor' | translate }}:</p>
                    <div class="dFlex">
                        <div class="input-container">
                            <input #inputFilterDoc class="barra-de-busqueda" type="search" name="search"
                                [(ngModel)]="busqueda" autocomplete="off"
                                placeholder="{{'pos.inputs.buscar' | translate}}" (ngModelChange)="filtrar()">
                            <button mat-icon-button class="iconoLupa" type="submit">
                                <mat-icon>search</mat-icon>
                            </button>
                        </div>
                        <span class="spacer"></span>
                    </div>
                </div>

                <div class="d-flex">
                    <span class="spacer"></span>
                    <p class="textosBold14">{{ 'pos.factura.registros' | translate }}
                        ({{documentos.length}})
                    </p>
                </div>

                <div class="cambiarFecha" *ngIf="documentos.length == 0">
                    <span class="spacer"></span>
                    <p class="textosBold14"> {{ 'pos.factura.actualizarFechas' | translate }} </p>
                    <span class="spacer"></span>
                </div>

                <div class="lista-documentos" *ngFor="let documento of documentos">

                    <div class="dFlex">
                        <p class="textosBold14">{{ 'pos.documento.idDoc' | translate }} {{documento.id_Documento}}</p>
                        <p class="padding-right"></p>
                     <p class="textosBold14">{{ 'pos.factura.consecutivo' | translate }}:
                            {{documento.consecutivo_Interno}}
                        </p>
                        <span class="spacer"></span>
                        <p class="textosBold14">{{ 'pos.documento.usuario' | translate }} {{documento.userName}}</p>
                    </div>

                    <div class="documentos-origen" (click)=" detalleDoc()">
                        <div class="dFlex">
                            <p class="textosBold14">{{ 'pos.documento.fechaHora' | translate }} </p>
                            <p class="textos14">{{documento.fecha_Hora}}</p>

                            <span class="spacer"></span>
                            <p class="textosBold14">{{ 'pos.documento.fechaDoc' | translate }} </p>
                            <p class="textos14">{{documento.fecha_Documento}}</p>
                        </div>
                        <div class="dFlex">
                            <p class="textosBold14">{{ 'pos.documento.serieDoc' | translate }} </p>
                            <p class="textos14">{{documento.des_Serie_Documento}} </p>
                        </div>
                        <div class="dFlex">
                            <p class="textosBold14">{{ 'pos.factura.cliente' | translate }}: </p>
                            <p class="textos14"> {{documento.documento_Nombre}} </p>
                        </div>
                        <div class="dFlex">
                            <p class="textosBold14">NIT: </p>
                            <p class="textos14"> {{documento.documento_NIT}} </p>
                        </div>
                        <div class="dFlex">
                            <span class="spacer"></span>
                            <p class="textosBold14">{{ 'pos.factura.total' | translate }}: {{documento.t_Tra_M |
                                currencyFormat}}
                            </p>
                        </div>
                    </div>
                </div>

                <span class="spacer"></span>
            </div>
        </div>


        <div *ngIf="verDetalle">

            <mat-toolbar class="toolbarPhone">
                <mat-toolbar-row class="toolbar-row">
                    <button mat-icon-button (click)="backSearch() "
                        matTooltip="{{ 'pos.botones.regresar' | translate }}">
                        <mat-icon>arrow_back</mat-icon>
                    </button>
                    <button mat-icon-button (click)="loadData()">
                        <mat-icon>refresh</mat-icon>
                    </button>
                    <p class="titulo">Detalle documento: 123</p>


                    <span class="spacer"></span>

                </mat-toolbar-row>
            </mat-toolbar>
            <mat-toolbar class="toolbarlargeTitle">
                <button mat-icon-button (click)="backSearch() " matTooltip="{{ 'pos.botones.regresar' | translate }}">
                    <mat-icon>arrow_back</mat-icon>
                </button>
                <button mat-icon-button (click)="loadData()">
                    <mat-icon>refresh</mat-icon>
                </button>
                <p class="titulo">Detalle documento: 123</p>


                <span class="spacer"></span>

            </mat-toolbar>

            <div class="container_main">
                <div class="container">
                    <div class="dFlex">
                        <div class="bloqueDetalle">
                            <p class="subtitulo-borde">{{'pos.home.tipoDocumento' | translate}}</p>
                            <div class="descripciones">
                                <p class="textos">Tipo documento detalle</p>
                            </div>
                        </div>
                        <span class="spacer"></span>
                        <div class="bloqueDetalle">
                            <p class="subtitulo-borde ">{{'pos.home.serieDocumento' | translate}}</p>
                            <div class="descripciones">
                                <p class="textos">Serie documento detalle</p>
                            </div>
                        </div>
                    </div>

                    <div class="dFlex">
                        <div class="bloqueDetalle">
                            <p class="subtitulo-borde">{{'pos.home.empresa' | translate}}</p>
                            <div class="descripciones">
                                <p class="textos">Empresa documento detalle</p>
                            </div>
                        </div>
                        <span class="spacer"></span>
                        <div class="bloqueDetalle">
                            <p class="subtitulo-borde ">{{'pos.home.estacion' | translate}}</p>
                            <div class="descripciones">
                                <p class="textos">Estacion documento detalle</p>
                            </div>
                        </div>
                    </div>

                    <div class="dFlex">
                        <div class="bloqueDetalle">
                            <p class="subtitulo-borde ">{{ 'pos.factura.tipoRef' | translate }}</p>
                            <div class="descripciones">
                                <p class="textos">Tipo referencia detalle</p>
                            </div>
                        </div>
                        <span class="spacer"></span>
                        <div class="bloqueDetalle">
                            <p class="subtitulo-borde">
                                {{ 'pos.factura.descripcion' | translate }}</p>
                            <div class="descripciones">
                                <p class="textos">Descripcion tipo referencia detalle</p>
                            </div>
                        </div>
                    </div>

                    <div class="dFlex">
                        <div class="bloqueDetalle">
                            <p class="subtitulo-borde">
                                {{ 'pos.factura.contacto' | translate }}</p>
                            <div class="descripciones">
                                <p class="textos">Observacion 2</p>
                            </div>
                        </div>
                        <span class="spacer"></span>
                        <div class="bloqueDetalle">
                            <p class="subtitulo-borde">
                                {{ 'pos.factura.entrega' | translate }}</p>
                            <div class="descripciones">
                                <p class="textos">Observacion 3</p>
                            </div>
                        </div>
                    </div>
                    <div class="dFlex">
                        <div class="bloqueDetalle">
                            <p class="subtitulo-borde">
                                {{ 'pos.factura.observacion' | translate }}</p>
                            <div class="descripciones">
                                <p class="textos">Observacion</p>
                            </div>
                        </div>
                    </div>

                    <div class="dFlex">
                        <div class="dFlex width45">
                            <div class="bloqueDetalle">
                                <p class="subtitulo-borde">
                                    {{ 'pos.factura.fEntrega' | translate }}
                                </p>
                                <div class="descripciones">
                                    <p class="textos">Fecha Ref Ini</p>
                                </div>
                            </div>
                            <span class="spacer"></span>
                            <div class="bloqueDetalle">
                                <p class="subtitulo-borde">
                                    {{ 'pos.factura.fRecoger' | translate }}</p>
                                <div class="descripciones">
                                    <p class="textos">Fecha Ref Fin</p>
                                </div>
                            </div>
                        </div>
                        <span class="spacer"></span>

                        <div class="dFlex width45">
                            <div class="bloqueDetalle">
                                <p class="subtitulo-borde">{{ 'pos.documento.fechaIni' | translate }} </p>
                                <div class="descripciones">
                                    <p class="textos">Fecha Ini</p>
                                </div>
                            </div>
                            <span class="spacer"></span>
                            <div class="bloqueDetalle">
                                <p class="subtitulo-borde">{{ 'pos.documento.fechaFin' | translate }} </p>
                                <div class="descripciones">
                                    <p class="textos">Fecha Fin</p>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="dFlex">
                        <div class="bloqueDetalle">
                            <p class="subtitulo-borde ">{{ 'pos.factura.receptor' | translate }}</p>
                            <div class="descripciones">
                                <p class="textos">{{ 'pos.factura.nit' | translate }}: 1234567-8</p>
                                <p class="textos">{{ 'pos.factura.nombre' | translate }}: Cliente 1</p>
                                <p class="textos">{{ 'pos.factura.direccion' | translate }}: Ciudad</p>
                            </div>
                        </div>

                        <span class="spacer"></span>
                        <div class="bloqueDetalle">
                            <p class="subtitulo-borde ">{{ 'pos.factura.vendedor' | translate }}</p>
                            <div class="descripciones">
                                <p class="textos">Vendedor 2</p>
                            </div>
                        </div>
                    </div>

                    <div class="dFlex">
                        <div class="productoPagoAgregado">
                            <p class="subtitulo">{{ 'pos.factura.productos' | translate }}</p>
                            <div class="descripcionProductoPago">
                                <p class="textos">1 x 10</p>
                                <p class="textos">{{ 'pos.factura.sku' | translate }} Café</p>
                                <p class="textos">{{ 'pos.factura.precio_unitario' | translate }}
                                    {{ 0 | currency: ' ' :'symbol':'2.2-2' }}
                                </p>
                                <p class="textos">{{ 'pos.factura.total' | translate }} {{100 | currency:'
                                    ':'symbol':'2.2-2' }}
                                </p>
                            </div>
                        </div>
                        <span class="spacer"></span>
                        <div class="productoPagoAgregado">
                            <p class="subtitulo">{{ 'pos.factura.formas_pago' | translate }}</p>
                            <div class="descripcionProductoPago">
                                <p class="textos">Cargo/Descuento</p>
                                <p class="textos">{{ 'pos.factura.autorizacion' | translate }}
                                    453
                                </p>
                                <p class="textos">
                                    {{ 'pos.factura.referencia' | translate }}
                                    100
                                </p>
                                <p class="textos">{{ 'pos.factura.banco' | translate }}
                                    10 </p>
                                <p class="textos">{{ 'pos.factura.cuenta' | translate }}
                                    Cuenta 1 </p>
                                <p class="textos">
                                    {{ 'pos.factura.monto' | translate }} {{0 | currency:' ':'symbol':'2.2-2' }}</p>
                            </div>
                        </div>
                    </div>

                    <div class="dFlex">
                        <span class="spacer"></span>
                        <div class="descripcion-total">
                            <div class="dFlex">
                                <p class="subtitulo-total">{{ 'pos.factura.subtotal' | translate }}</p>
                                <span class="spacer"></span>
                                <p class="textos-total">
                                    {{4 | currency:' ':'symbol':'2.2-2'}}
                                </p>
                            </div>
                            <div class="dFlex">
                                <p class="subtitulo-total">{{ 'pos.factura.cargos' | translate }}</p>
                                <span class="spacer"></span>
                                <p class="textos-total"> {{ 10 | currency:' ':'symbol':'2.2-2' }}
                                </p>
                            </div>
                            <div class="dFlex">
                                <p class="subtitulo-total">{{ 'pos.factura.descuentos' | translate }}</p>
                                <span class="spacer"></span>
                                <p class="textos-total">
                                    {{5 | currency:' ':'symbol':'2.2-2' }}
                                </p>
                            </div>
                            <!-- <hr> -->
                            <div class="dFlex total-barra">
                                <p class="subtitulo-total">{{ 'pos.factura.total' | translate }}</p>
                                <span class="spacer"></span>
                                <p class="textos-total">{{5 | currency:' ':'symbol':'2.2-2' }}
                                </p>
                            </div>
                        </div>
                    </div>

                </div>

            </div>

        </div>

        <!-- Mostrar logos -->
        <app-barra-logos></app-barra-logos>
    </div>
</div>